{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const imgCardTemplate = img => {\n  return `<li class=\"gallery-item\">\n            <a href=\"${img.largeImageURL}\">\n              <img\n                class=\"gallery-item-img\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n                width=\"360\"\n              />\n            </a>\n            <ul class=\"img-info-list\">\n              <li>\n                <p class=\"img-data-name\">Likes</p>\n                <p class=\"img-data\">${img.likes}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Views</p>\n                <p class=\"img-data\">${img.views}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Comments</p>\n                <p class=\"img-data\">${img.comments}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Downloads</p>\n                <p class=\"img-data\">${img.downloads}</p>\n              </li>\n            </ul>\n          </li>`;\n};\n\nexport default function imgCardsTemplate(arr) {\n  return arr.map(imgCardTemplate).join('');\n}\n","import axios from 'axios';\n\nfunction queryParams(keyWord, page) {\n  const params = new URLSearchParams({\n    key: '44691469-d7e9dab06c3e716fb34c6ceb9',\n    q: keyWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  return params.toString();\n}\n\nexport default async function getImages(keyWord, page) {\n  const { data } = await axios.get(\n    `https://pixabay.com/api/?${queryParams(keyWord, page)}`\n  );\n\n  return data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport imgCardsTemplate from './js/render-functions';\nimport getPics from './js/pixabay-api';\n\nconst perPage = 15;\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wrapper');\nconst loadButton = document.querySelector('[data-load]');\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet keyWord;\nlet page;\n\nform.addEventListener('submit', handleFormSubmit);\nloadButton.addEventListener('click', handleLoadButtonClick);\n\nfunction handleFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  keyWord = form.keyWord.value.trim();\n\n  if (keyWord === '') {\n    showNotification({\n      title: '<b>Error:</b>',\n      message: 'Input can not be blank.',\n      backgroundColor: 'tomato',\n    });\n\n    return;\n  }\n\n  form.keyWord.value = '';\n  gallery.innerHTML = '';\n\n  loadAndRenderPics();\n}\n\nfunction handleLoadButtonClick() {\n  page++;\n  loadAndRenderMorePics();\n}\n\nasync function loadAndRenderPics() {\n  try {\n    loader.classList.toggle('hidden');\n    const { hits, totalHits } = await getPics(keyWord, page);\n    loader.classList.toggle('hidden');\n\n    if (hits.length > 0) {\n      gallery.insertAdjacentHTML('afterbegin', imgCardsTemplate(hits));\n      modal.refresh();\n\n      handleLoadButtonDisplay(totalHits);\n    } else {\n      showNotification({\n        title: '<b>Oops!</b>',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: 'deepskyblue',\n      });\n    }\n  } catch (error) {\n    showNotification({\n      title: '<b>Error:</b>',\n      message: error.message,\n      backgroundColor: 'tomato',\n    });\n  }\n}\n\nasync function loadAndRenderMorePics() {\n  try {\n    loader.classList.toggle('hidden');\n    const { hits, totalHits } = await getPics(keyWord, page);\n    loader.classList.toggle('hidden');\n\n    gallery.insertAdjacentHTML('beforeend', imgCardsTemplate(hits));\n    modal.refresh();\n\n    doSmoothScroll();\n\n    handleLoadButtonDisplay(totalHits);\n  } catch (error) {\n    showNotification({\n      title: '<b>Error:</b>',\n      message: error.message,\n      backgroundColor: 'tomato',\n    });\n  }\n}\n\nfunction handleLoadButtonDisplay(maxResults) {\n  if (canLoadMore(maxResults)) {\n    loadButton.classList.remove('hidden');\n  } else {\n    loadButton.classList.add('hidden');\n    showNotification({\n      title: '<b>Oops!</b>',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: 'deepskyblue',\n    });\n  }\n}\n\nfunction canLoadMore(maxResults) {\n  return Math.ceil(maxResults / perPage) > page;\n}\n\nfunction showNotification({ title, message, backgroundColor }) {\n  iziToast.show({\n    title,\n    message,\n    backgroundColor,\n    position: 'center',\n  });\n}\n\nfunction doSmoothScroll() {\n  const liElem = document.querySelector('li');\n  const rect = liElem.getBoundingClientRect();\n  window.scrollBy({ top: rect.height * 2 + 24, behavior: 'smooth' });\n}\n"],"names":["imgCardTemplate","img","imgCardsTemplate","arr","queryParams","keyWord","page","getImages","data","axios","perPage","form","gallery","loader","loadButton","modal","SimpleLightbox","handleFormSubmit","handleLoadButtonClick","showNotification","loadAndRenderPics","loadAndRenderMorePics","hits","totalHits","getPics","handleLoadButtonDisplay","error","doSmoothScroll","maxResults","canLoadMore","title","message","backgroundColor","iziToast","rect"],"mappings":"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"}