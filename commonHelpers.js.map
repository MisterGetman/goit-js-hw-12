{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const imgCardTemplate = img => {\n  return `<li class=\"gallery-item\">\n            <a href=\"${img.largeImageURL}\">\n              <img\n                class=\"gallery-item-img\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n                width=\"360\"\n              />\n            </a>\n            <ul class=\"img-info-list\">\n              <li>\n                <p class=\"img-data-name\">Likes</p>\n                <p class=\"img-data\">${img.likes}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Views</p>\n                <p class=\"img-data\">${img.views}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Comments</p>\n                <p class=\"img-data\">${img.comments}</p>\n              </li>\n              <li>\n                <p class=\"img-data-name\">Downloads</p>\n                <p class=\"img-data\">${img.downloads}</p>\n              </li>\n            </ul>\n          </li>`;\n};\n\nexport default function imgCardsTemplate(arr) {\n  return arr.map(imgCardTemplate).join('');\n}\n","import axios from 'axios';\n\nexport default async function get(query) {\n  const res = await axios.get(`https://pixabay.com/api?${query}`);\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport imgCardsTemplate from './js/render-functions';\nimport getPics from './js/pixabay-api';\n\nconst PER_PAGE = 15;\nconst API_KEY = '44691469-d7e9dab06c3e716fb34c6ceb9';\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-wrapper');\nconst loadButton = document.querySelector('[data-load]');\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet keyWord;\nlet page;\n\nform.addEventListener('submit', handleFormSubmit);\nloadButton.addEventListener('click', handleLoadButtonClick);\n\nfunction queryParams(keyWord) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: keyWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: PER_PAGE,\n  });\n\n  return params.toString();\n}\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n  loader.classList.toggle('hidden');\n  page = 1;\n  keyWord = form.keyWord.value.trim();\n  form.keyWord.value = '';\n  gallery.innerHTML = '';\n\n  await loadAndRenderPics();\n\n  loader.classList.toggle('hidden');\n}\n\nasync function handleLoadButtonClick(e) {\n  loader.classList.toggle('hidden');\n  page++;\n\n  await loadAndRenderMorePics();\n\n  loader.classList.toggle('hidden');\n}\n\nasync function loadAndRenderPics() {\n  try {\n    if (keyWord === '') return Promise.reject('Input can not be blank.');\n\n    const data = await getPics(queryParams(keyWord));\n\n    if (data.hits.length > 0) {\n      gallery.insertAdjacentHTML('afterbegin', imgCardsTemplate(data.hits));\n      modal.refresh();\n\n      handleLoadButtonDisplay(data.totalHits);\n    } else {\n      showNotification({\n        title: '<b>Oops!</b>',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: 'deepskyblue',\n      });\n    }\n  } catch (error) {\n    showNotification({\n      title: '<b>Error:</b>',\n      message: error,\n      backgroundColor: 'tomato',\n    });\n  }\n}\n\nasync function loadAndRenderMorePics() {\n  try {\n    const data = await getPics(queryParams(keyWord));\n\n    gallery.insertAdjacentHTML('beforeend', imgCardsTemplate(data.hits));\n    modal.refresh();\n\n    doSmoothScroll();\n\n    handleLoadButtonDisplay(data.totalHits);\n  } catch (error) {\n    showNotification({\n      title: '<b>Error:</b>',\n      message: error,\n      backgroundColor: 'tomato',\n    });\n  }\n}\n\nfunction handleLoadButtonDisplay(maxResults) {\n  if (canLoadMore(maxResults)) {\n    loadButton.classList.remove('hidden');\n  } else {\n    loadButton.classList.add('hidden');\n    showNotification({\n      title: '<b>Oops!</b>',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: 'deepskyblue',\n    });\n  }\n}\n\nfunction canLoadMore(maxResults) {\n  return Math.ceil(maxResults / PER_PAGE) > page;\n}\n\nfunction showNotification({ title, message, backgroundColor }) {\n  iziToast.show({\n    title,\n    message,\n    backgroundColor,\n    position: 'center',\n  });\n}\n\nfunction doSmoothScroll() {\n  const liElem = document.querySelector('li');\n  const rect = liElem.getBoundingClientRect();\n  window.scrollBy({ top: rect.height * 2 + 24, behavior: 'smooth' });\n}\n"],"names":["imgCardTemplate","img","imgCardsTemplate","arr","get","query","axios","PER_PAGE","API_KEY","form","gallery","loader","loadButton","modal","SimpleLightbox","keyWord","page","handleFormSubmit","handleLoadButtonClick","queryParams","loadAndRenderPics","loadAndRenderMorePics","data","getPics","handleLoadButtonDisplay","showNotification","error","doSmoothScroll","maxResults","canLoadMore","title","message","backgroundColor","iziToast","rect"],"mappings":"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"}